{% extends 'base.html' %}

{% block title %}Home{% endblock %}

{% block meta_description %}Welcome to myPanda Blog - Your source for insightful articles about technology, programming, and life.{% endblock %}

{% block content %}
{% load markdown_deux_tags %}
<!-- Posts Section -->
<section class="w-full md:w-2/3 flex flex-col items-center px-3">
    {% for post in posts %}
        <article class="flex flex-col shadow my-4 hover:shadow-lg transition-shadow duration-200">
            <!-- Article Image -->
            {% if post.image %}
            <a href="{% url 'post_detail' post.slug %}" class="hover:opacity-75 transition-opacity duration-200">
                <img src="{{ post.image.url }}" 
                     alt="{{ post.title }}"
                     loading="lazy"
                     class="w-full h-64 object-cover">
            </a>
            {% endif %}
            <div class="bg-white flex flex-col justify-start p-6">
                <a href="{% url 'category_detail' post.category.slug %}" 
                   class="text-blue-700 text-sm font-bold uppercase pb-4 hover:text-blue-900 transition-colors duration-200">
                    {{ post.category.title }}
                </a>
                <a href="{% url 'post_detail' post.slug %}" 
                   class="text-3xl font-bold hover:text-gray-700 pb-4 transition-colors duration-200">
                    {{ post.title }}
                </a>
                <p class="text-sm pb-3">
                    By <span class="font-semibold">{{ post.author }}</span>, Published on {{ post.created_at | date:"M d, Y" }}
                </p>
                <div class="pb-6">{{ post.intro | safe | truncatewords:50 }}</div>
                <a href="{% url 'post_detail' post.slug %}" 
                   class="uppercase text-gray-800 hover:text-black transition-colors duration-200 inline-flex items-center">
                    Continue Reading 
                    <svg class="w-4 h-4 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"/>
                    </svg>
                </a>
            </div>
        </article>
    {% empty %}
        <div class="text-center py-8">
            <p class="text-gray-600">No posts available at the moment.</p>
        </div>
    {% endfor %}

    <!-- Pagination -->
    {% include 'pagination.html' with page=posts %}
</section>
{% endblock %}
